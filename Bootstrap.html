<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1A2B çŒœæ•¸å­—</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cute+Font&family=Noto+Sans+TC:wght@400;700&family=DynaPuff:wght@400..700&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: linear-gradient(135deg, #6fcde0, #e6f1ff);
        font-family: "Cute Font", "DynaPuff", "Noto Sans TC", cursive;
        min-height: 100vh;
        color: #444;
      }

      .title {
        text-align: center;
        margin-top: 25px;
        margin-bottom: 20px;
        font-size: 3rem;
        color: #966de7;
        text-shadow: 2px 2px #fff;
      }

      .game-container {
        max-width: 500px;
        margin: auto;
        background-color: #ffffffcc;
        border-radius: 20px;
        box-shadow: 0 0 10px #ffd0e1;
        padding: 20px;
      }

      #userInput {
        text-align: center;
        font-size: 2rem;
        letter-spacing: 10px;
        border: 2px dashed #ffa8d9;
        border-radius: 10px;
        background-color: #fff8fb;
        color: #24d0bc;
      }

      .btn {
        font-size: 1.2rem;
        border-radius: 12px;
      }

      /* ä¹å®®æ ¼éµç›¤ */
      .keypad {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-top: 15px;
      }

      .num-btn {
        background-color: #fff2fa;
        border: 2px solid #92a9ce;
        border-radius: 15px;
        font-size: 2rem;
        color: #439ce5;
        padding: 15px;
        transition: 0.15s;
        box-shadow: 0 2px 3px rgba(50, 134, 212, 0.3);
      }

      .num-btn:hover {
        background-color: #ffe6f4;
        transform: scale(1.05);
      }

      .num-btn:active {
        transform: scale(0.9);
      }

      .record {
        border-bottom: 1px dotted #ffb3d9;
        padding: 5px;
        color: #db90b5;
        font-size: 1.4rem;
      }

      .card-header {
        font-size: 1.4rem;
      }
    </style>
  </head>

  <body>
    <div class="container py-3">
      <h1 class="title">1A2B çŒœæ•¸å­—</h1>

      <div class="text-center mb-3">
        <button id="startBtn" class="btn btn-success me-2">é–‹å§‹</button>
        <button id="resetBtn" class="btn btn-danger me-2">é‡ä¾†</button>
        <button id="showBtn" class="btn btn-warning">ğŸ‘€ å·çœ‹</button>
      </div>

      <div class="game-container">
        <div class="text-center mb-3">
          <label class="form-label fs-4 text-secondary">è¼¸å…¥å››ä½ä¸é‡è¤‡æ•¸å­—ï¼š</label>
          <input
            id="userInput"
            type="text"
            maxlength="4"
            class="form-control mb-3"
            placeholder="----"
            readonly
          />
          <button id="guessBtn" class="btn btn-primary w-100"> çŒœï¼</button>
        </div>

        <!-- ä¹å®®æ ¼éµç›¤ -->
        <div class="card shadow-sm mb-4 border-0">
          <div class="card-header bg-pink text-white text-center bg-gradient" style="background-color:#f5aacf">
            ä¹å®®æ ¼éµç›¤
          </div>
          <div class="card-body">
            <div class="keypad">
              <button class="num-btn" data-num="1">1</button>
              <button class="num-btn" data-num="2">2</button>
              <button class="num-btn" data-num="3">3</button>
              <button class="num-btn" data-num="4">4</button>
              <button class="num-btn" data-num="5">5</button>
              <button class="num-btn" data-num="6">6</button>
              <button class="num-btn" data-num="7">7</button>
              <button class="num-btn" data-num="8">8</button>
              <button class="num-btn" data-num="9">9</button>
              <button class="num-btn btn-outline-danger" data-action="clear">
                æ¸…ç©º
              </button>
              <button class="num-btn" data-num="0">0</button>
              <button
                class="num-btn btn-outline-secondary"
                data-action="delete"
              >
                åˆªé™¤
              </button>
            </div>
          </div>
        </div>

        <!-- çŒœæ¸¬ç´€éŒ„ -->
        <div class="card shadow-sm border-0">
          <div class="card-header text-white text-center bg-gradient" style="background-color:#48deca">
            çŒœæ¸¬ç´€éŒ„
          </div>
          <div id="historyPanel" class="card-body bg-light rounded-bottom"></div>
        </div>
      </div>
    </div>

    <script>
      let answer = "";
      let gameStarted = false;
      const input = document.getElementById("userInput");
      const historyPanel = document.getElementById("historyPanel");

      function generateAnswer() {
        const arr = [];
        while (arr.length < 4) {
          const n = Math.floor(Math.random() * 10);
          if (!arr.includes(n)) arr.push(n);
        }
        return arr.join("");
      }

      document.getElementById("startBtn").addEventListener("click", () => {
        answer = generateAnswer();
        gameStarted = true;
        input.value = "";
        historyPanel.innerHTML = "";
        alert("éŠæˆ²é–‹å§‹å›‰ï¼åŠ æ²¹ï¼");
      });

      document.getElementById("resetBtn").addEventListener("click", () => {
        gameStarted = false;
        input.value = "";
        historyPanel.innerHTML = "";
      });

      document.getElementById("showBtn").addEventListener("click", () => {
        if (!gameStarted) return alert("è«‹å…ˆé–‹å§‹éŠæˆ²å–”ï¼");
        alert("ç­”æ¡ˆæ˜¯ï¼š" + answer);
      });

      document.getElementById("guessBtn").addEventListener("click", () => {
        if (!gameStarted) return alert("è«‹å…ˆé–‹å§‹éŠæˆ²å–”ï¼");
        const guess = input.value;
        if (guess.length !== 4) return alert("è«‹è¼¸å…¥å››ä½æ•¸å­—ï¼");
        if (new Set(guess).size !== 4) return alert("è«‹å‹¿è¼¸å…¥é‡è¤‡æ•¸å­—ï¼");
        let A = 0,
          B = 0;
        for (let i = 0; i < 4; i++) {
          if (guess[i] === answer[i]) A++;
          else if (answer.includes(guess[i])) B++;
        }
        const record = document.createElement("div");
        record.classList.add("record");
        record.textContent = `${guess} âœ ${A}A${B}B`;
        historyPanel.prepend(record);

        if (A === 4) {
          alert("å¤ªæ£’äº†ï¼ä½ ç­”å°å•¦ï½");
          gameStarted = false;
        }
        input.value = "";
      });

      document.querySelectorAll(".num-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          if (!gameStarted) return alert("è«‹å…ˆé–‹å§‹éŠæˆ²å–”ï¼");
          const num = btn.dataset.num;
          const act = btn.dataset.action;
          if (num) {
            if (input.value.length < 4 && !input.value.includes(num)) {
              input.value += num;
            }
          } else if (act === "clear") {
            input.value = "";
          } else if (act === "delete") {
            input.value = input.value.slice(0, -1);
          }
        });
      });
    </script>
  </body>
</html>
